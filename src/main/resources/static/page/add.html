<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>写博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <!-- Facebook and Twitter integration -->
    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
    <meta name="twitter:title" content=""/>
    <meta name="twitter:image" content=""/>
    <meta name="twitter:url" content=""/>
    <meta name="twitter:card" content=""/>

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="shortcut icon" href="favicon.ico">

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="../css/animate.css">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="../css/icomoon.css">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="../css/bootstrap.css">
    <!-- Flexslider  -->
    <link rel="stylesheet" href="../css/flexslider.css">
    <!-- Theme style  -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- 自己写的css -->
    <link rel="stylesheet" href="../css/myStyle.css">


    <!-- Modernizr JS -->
    <script src="../js/modernizr-2.6.2.min.js"></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="../js/respond.min.js"></script>
    <![endif]-->


</head>
<body>
<div id="fh5co-page">
    <!-- 左侧栏 -->
    <div id="nav"></div>

    <!-- 主体部分 -->
    <div id="fh5co-main">

        <div class="fh5co-narrow-content">
            <div class="row" style="width: 90%; margin: 0 auto; padding: 20px; ">
                <form method="post" id="form">
                    <div class="form-group">
                        <label for="title">标题</label>
                        <input type="text" class="form-control" id="title" name="title" placeholder="title">
                    </div>
                    <div class="form-group">
                        <label for="content">内容</label>
                        <!--<input type="password" class="form-control" id="content" placeholder="content">-->
                        <textarea class="form-control" rows="10" id="content" name="content"></textarea>
                    </div>
                    <div class="form-group">
                        <label>作者</label>
                        <select class="form-control" id="author" name="author">

                        </select>

                    </div>

                    <div id="category" class="radio" style="margin: 20px 0;">
                    </div>

                    <div>
                        <button id="submit" type="submit" class="btn btn-primary btn-lg btn-block">提交</button>
                    </div>


                </form>
            </div>
        </div>
    </div>
</div>


<!-- jQuery -->
<script src="../js/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="../js/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="../js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="../js/jquery.waypoints.min.js"></script>
<!-- Flexslider -->
<script src="../js/jquery.flexslider-min.js"></script>


<!-- MAIN JS -->
<script src="../js/main.js"></script>

<script>
    $(function () {
        $("#nav").load("common/nav.html");
    });

    $(function () {
        var author = [
            {
                "authorId": 1,
                "authorName": "无可"
            },
            {
                "authorId": 2,
                "authorName": "莫名"
            }
        ];
        var category = [
            {
                "categoryId": 1,
                "categoryName": "Java"
            },
            {
                "categoryId": 2,
                "categoryName": "JavaScript"
            }
        ];

        var authorHTML = "";

        // <option>无可</option>
        // <option>莫名</option>

        for (x in author) {
            authorHTML += "<option value='"
            authorHTML += author[x].authorId;
            authorHTML += "'>";
            authorHTML += author[x].authorName;
            authorHTML += "</option>";
        }

        // alert(authorHTML);

        document.getElementById("author").innerHTML = authorHTML;

        var categoryHTML = "";
        for (y in category) {
            categoryHTML += "<label class='checkbox-inline'><input type='radio' name='category' value='";
            categoryHTML += category[y].categoryId;
            categoryHTML += "'>";
            categoryHTML += category[y].categoryName;
            categoryHTML += "</label>";
        }

        // alert(categoryHTML);

        document.getElementById("category").innerHTML = categoryHTML;


    })



    $(function () {
        // var blogDTO = {
        //     id: id,
        //     title: title,
        //     content: content,
        //     author: author,
        //     categoryList: "Java"
        // }


        $("#submit").click(function () {
            // var form = document.getElementById('form');
            // var formData = new FormData(form);
            //
            // alert(formData.get("title"));
            $.ajax({
                method: "POST",
                url: "/blog/save",
                data: $("#form").serialize(),
                // data: {
                //     "title": "jjj",
                //     "content": "内容",
                //     "author": 1,
                //     "category": 1
                // },
                success: function (result) {
                    // history.back();
                    // window.location.href = "http://www.so.com";
                    window.open("/index.html");
                },
                error: function () {
                    alert("提交失败，请联系管理员！");
                }
            });
        });
    });
</script>

</body>
</html>